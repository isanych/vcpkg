diff --git a/src/google/protobuf/dynamic_message.cc b/src/google/protobuf/dynamic_message.cc
index b7a7482..a7f7194 100644
--- a/src/google/protobuf/dynamic_message.cc
+++ b/src/google/protobuf/dynamic_message.cc
@@ -214,9 +214,7 @@ class DynamicMessage final : public Message {
   // manually call the global operator delete. Calling the destructor is taken
   // care of for us. This makes DynamicMessage compatible with -fsized-delete.
   // It doesn't work for MSVC though.
-#ifndef _MSC_VER
   static void operator delete(void* ptr) { ::operator delete(ptr); }
-#endif  // !_MSC_VER
 #endif
 
  private:
diff --git a/src/google/protobuf/extension_set.cc b/src/google/protobuf/extension_set.cc
index bad7d59..7b7965b 100644
--- a/src/google/protobuf/extension_set.cc
+++ b/src/google/protobuf/extension_set.cc
@@ -1576,7 +1576,8 @@ void ExtensionSet::Extension::Free() {
         if (is_lazy) {
           delete ptr.lazymessage_value;
         } else {
-          delete ptr.message_value;
+          ptr.message_value->~MessageLite();
+          ::operator delete(ptr.message_value);
         }
         break;
       default:
