# Every update requires an update of these hashes and the version within the control file of each of the 32 ports.
# So it is probably better to have a central location for these hashes and let the ports update via a script
set(QT_MAJOR_MINOR_VER 5.15)
set(QT_PATCH_VER 13)
set(QT_UPDATE_VERSION 0) # Switch to update qt and not build qt. Creates a file cmake/qt_new_hashes.cmake in qt5-base with the new hashes.

set(QT_PORT_LIST base 3d activeqt charts connectivity datavis3d declarative gamepad graphicaleffects imageformats location macextras mqtt multimedia networkauth
                 purchasing quickcontrols quickcontrols2 remoteobjects script scxml sensors serialport speech svg tools virtualkeyboard webchannel websockets
                 webview winextras xmlpatterns doc x11extras androidextras translations serialbus webengine webglplugin wayland)

set(QT_HASH_qt5-3d               1fe024e4e0052785106d88f86ae8b5a13bd9b3829f016d5c8c76cc9ca80f19861f78b3ea50084773a387be856cb990622aab154ed0f2786a131658931b432a68)
set(QT_HASH_qt5-activeqt         79b892ebdb5ad4760f442c1db24b5e08f27ee56e8c542fca065a5ee726a96d3dba860289d0269a0d4134547836c87073b2285993d7cd14a9d63125b7864177e4)
set(QT_HASH_qt5-androidextras    0)
set(QT_HASH_qt5-base             6e896ac23cdb9bec3a0a06f31ef3b8053f48876d0c963c14a4f837bad406e924706daae200c0895809d653a50b59b5e52ba163f08f3f22ad7ed06c5fb6fbc7bc)
set(QT_HASH_qt5-charts           a30375942edf7d8ededb43a58013bf714266bfa7dd58fb6663df45020f98395b433cabe0a54e6e444d5c3277754b0c66eb6afc1f31f6e911c00c7f74e894400b)
set(QT_HASH_qt5-connectivity     e675a9c59eb6bec0a4df3658022b01aeae7fe4474193238121f31bb3fac31b20c1fd4003733abe3e8cad1d49945d378867c81a6e8fe57af0629c1863270b6a6b)
set(QT_HASH_qt5-datavis3d        17387c339adb7ec5d5296130293bab1415ddc78cfb306b11455888080f055d02ceff64c9a1ef60392bdf31f38b372629cf682b219f044b460693dc7b38c4f181)
set(QT_HASH_qt5-declarative      b5e215ba5783f6bd213674f177347935866268c3bc4419014a26a40608cb38a35aaa83e6925b1ed6c7941b3d3b767e5fc49aa7a07efe1f4e683ac6fb23ece431)
set(QT_HASH_qt5-doc              0)
set(QT_HASH_qt5-gamepad          172baef0e28dda304bb79995f774cb8d9a9a29d7ecc950c8111e2990bf10def25417746fcd0cb412194d3450281bf75d3c5ecb1a797d8f0ff4aeca339824232c)
set(QT_HASH_qt5-graphicaleffects 18174dc4045161ddbc9b83768a852ee4220b11c5d5e53407dce68fd7acd7e249f135536e4adfe7b1034afc913d38a75266c98ec4d89f1198ce40623c0e4fc013)
set(QT_HASH_qt5-imageformats     0151102198935351fe20e67a1e1bedebb6f5bb97cfd9d56b52aa6ddc0031afd626f85d00d1d07b373dfcc568123e82afc3d6064967db990e3395293ea7de3256)
set(QT_HASH_qt5-location         d4452a6789303c28f9cb18828d24b80140caae22e2e6a5d378eff0df7841a6ef80d4980cd903387669e38b0b58d94901219c3559d10938cbab19adf4e701f89e)
set(QT_HASH_qt5-macextras        0)
set(QT_HASH_qt5-mqtt             0)
set(QT_HASH_qt5-multimedia       7c16517e213dcea150309720047a25df3f59ad68998a51f5a15aa0e1791127ecbb1a0976cb1c8474c0cf929c6f0c16e4d835a5c39648b85d09de88b039309e16)
set(QT_HASH_qt5-networkauth      4a189d4c82d98403acc25099013b7e1d62adcb287542c81cca1e1ff2be7fe30a8ccd2b4f08056689570a335e03d3e93662b9b39402566b90b95a7dffccbc099f)
set(QT_HASH_qt5-purchasing       1912015497472083e98de59075c3737b1a7d8c8507cf7598cc8668d25088f31d172bd564b16e7eb10e4a35b21bb17b6f6d9362bc343704e13b28a15d662b33e1)
set(QT_HASH_qt5-quickcontrols    7f6e221f208fae25a035b75fc339ef081e14d1e1d7dad1809293cd6704e6b08c74445f0130b50b30469efa2ce78fffc4d809287a7d953f713270ab529b2ba161)
set(QT_HASH_qt5-quickcontrols2   265a86626058eaaf495ef1a068bf25892445048981fc566bedf873d7f09474a29d4f398c2d3ffd8041946c14aaead93b84b43b032dae7d0abe2ee360ad2e164b)
set(QT_HASH_qt5-remoteobjects    a58ceb147a281d84f37d7210929e278415f76742ae06df2f6a9c1d5db855aedd3ad74ef94688cf730f6c74460ba96f4a4db1f266496924fe24f2657269be615c)
set(QT_HASH_qt5-script           0342d40ce26cf4c0923108886abfa8593a06c5cb7c62964dd84764904358ec71391721a4ed81e1d5faf23dae7f61510708684173b3109e6eab5c5a547ed2b82a)
set(QT_HASH_qt5-scxml            d41e017df600e355175e919703b2654a0f01034f03aee6d3e5021e7d7c61dc5a351d4511eca74c94f4b4fdb76aae20883ae305b0628f86fa14dea038f2e7c247)
set(QT_HASH_qt5-sensors          865c80dde8964642667507731c4f8eeddb873c903606294c46541da42b7305682f3932d5d142ff68ac94495569e2de7fd366c0801a6f07d31910eb686187b4f7)
set(QT_HASH_qt5-serialbus        02218ab77399f16b6fb9cda979c86a34f8fe7080a3532970ad3e5493f968a29bb07a8362b95bc32acc5839ec32eff1d9377a84c58faae3e4ddd468c1fad3339d)
set(QT_HASH_qt5-serialport       f455dcdef6e7da622d48e302f4564d8d59c779f7ad407da2d9a44391e90da63d440a5eb9d9e6dc34d805382841bed6e312c86cbbca6b327b641c54a6dc707e68)
set(QT_HASH_qt5-speech           68d282250358a552d88e748d8e5e826f420a14b1b64384c4e6dd3635e01ea722673170d601f752052fab01cf301a46fe1ee66e56cb3ec8c28cad4e51b1c93ec0)
set(QT_HASH_qt5-svg              6c7ffd1e2f8d0db49e62e29304f31a44704a3ac98e98d5418150a6a06be7abb3d130a30f11e5b19c5861491962418b4d0253da0d99147097bf2062ad6d0dcdaf)
set(QT_HASH_qt5-tools            1decff2a95e2a226845369617bf7c3fe96ae1b2a140f93eb00a42685f68f410b906a2cd6d377cdef609b8d8a4d43aead78d99e8dd696925052dacac7a901e9dd)
set(QT_HASH_qt5-translations     e63263f053d6183de625b44319ecd2edd75f463f8e939c555cb085f3088eae52b4973ada8f881301362aedb9ce07ac8d4e28624fe50ec3b6faf3e3ad1b89c9a6)
set(QT_HASH_qt5-virtualkeyboard  fe7280130e6f49c11f6a6ba46eb92d40f6b572e2cebfe0767957b3a9b85072fb6e526d73c918b1f4a83698532b2db586423aa43b5604e72a52073a82edcef237)
set(QT_HASH_qt5-wayland          0)
set(QT_HASH_qt5-webchannel       04505fdc707925bb84a01842801ac9006ded34412f95581d74512354767401bb17ab66046f831696b55f270f19a8ff948bd8c148bda72ba4bcab2ecc6f46a0ab)
set(QT_HASH_qt5-webengine        1749e25bef88d6a0f34d744ddff5c97a1608535ba4c8e06a03b3286c67f3c668eece2c897d8fb79ca9928043ec31ef4c52db1a39bee5a17dfeb68876a1876631)
set(QT_HASH_qt5-webglplugin      f43e812511215f89467456df173df37590d7685c3aa8e870b6029e8bd71e7d8690526d3fd9062573277e69161c679ba16651fcb66cc6d088c70176c502fa67bb)
set(QT_HASH_qt5-websockets       107e12119ac22273cc5deedef95bd1ed6541c4348877659f3495a98442d23d662d3d5bfb4de819c8e9bf81a5c26b3501a280ab74fd044bce937e372a109dfc7d)
set(QT_HASH_qt5-webview          124322c884ac69a7f9c50de487b5afd3729e25de164f7eea4c9e972523f1171ff4c9c8f87a7106f710ae7526c741639f51a30c751f351a37e83866438e98fb11)
set(QT_HASH_qt5-winextras        34297b3f428c84e0a233247bed749c8b817837f9b66ca2967751ca526f2d57a868d189a66c86673493b34ef8cf3799436afdf2f1d89c3339c4f3d1ce1a9423b4)
set(QT_HASH_qt5-x11extras        a8c3bfdbd4ff68c3d829192cb86822b5c1080ff038adc34475cfa555310343aec2bf12ec7b8642835bb6efed2924e1d704f69db018d65aca44760147bb72253e)
set(QT_HASH_qt5-xmlpatterns      d2ea87daf79578f523ca8b30d9142a82f4a04c82803898cbaeb7a928efaf9b64b919b74e39ad1b559ca7e2d403a3a4f1dc5f25e0c6c6bafa795d33653c6bd7b1)

if(QT_UPDATE_VERSION)
    message(STATUS "Running Qt in automatic version port update mode!")
    set(_VCPKG_INTERNAL_NO_HASH_CHECK 1)
    if("${PORT}" MATCHES "qt5-base")
        function(update_qt_version_in_manifest _port_name)
            set(_current_control "${VCPKG_ROOT_DIR}/ports/${_port_name}/vcpkg.json")
            file(READ ${_current_control} _control_contents)
            #message(STATUS "Before: \n${_control_contents}")
            string(REGEX REPLACE "\"version.*\": \"[0-9]+\.[0-9]+\.[0-9]+\",\n" "\"version\": \"${QT_MAJOR_MINOR_VER}.${QT_PATCH_VER}\",\n" _control_contents "${_control_contents}")
            string(REGEX REPLACE "\n  \"port-version\": [0-9]+," "" _control_contents "${_control_contents}")
            #message(STATUS "After: \n${_control_contents}")
            file(WRITE ${_current_control} "${_control_contents}")
            configure_file("${_current_control}" "${_current_control}" @ONLY NEWLINE_STYLE LF)
        endfunction()

        update_qt_version_in_manifest("qt5")
        foreach(_current_qt_port_basename ${QT_PORT_LIST})
            update_qt_version_in_manifest("qt5-${_current_qt_port_basename}")
        endforeach()
    endif()
endif()