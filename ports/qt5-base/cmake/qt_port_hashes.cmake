# Every update requires an update of these hashes and the version within the control file of each of the 32 ports.
# So it is probably better to have a central location for these hashes and let the ports update via a script
set(QT_MAJOR_MINOR_VER 5.15)
set(QT_PATCH_VER 18)
set(QT_UPDATE_VERSION OFF) # Switch to update qt and not build qt. Creates a file cmake/qt_new_hashes.cmake in qt5-base with the new hashes.

set(QT_PORT_LIST base 3d activeqt charts connectivity datavis3d declarative gamepad graphicaleffects imageformats location macextras mqtt multimedia networkauth
                 purchasing quickcontrols quickcontrols2 remoteobjects script scxml sensors serialport speech svg tools virtualkeyboard webchannel websockets
                 webview winextras xmlpatterns doc x11extras androidextras translations serialbus webengine webglplugin wayland)

set(QT_HASH_qt5-3d               ee6aa8bfeb2634e0b7a7497ab9a602f0945e6b24b42ec8d6ce6ac303dd42f9e549a0c4d9e2bd32cc3283576202d5b72931a479b53e1e2f0b93342b844cb10fe9)
set(QT_HASH_qt5-activeqt         d65d695e333166afdea767d3514b544b3925b6aaf696bdd9423098ce4fc89845ec27cc78a9bd0b4aa0ffb1d883d1e41d86de3e66f3de5f7a78d1082b5e697c64)
set(QT_HASH_qt5-androidextras    b7b1f0b59b89fca3c988743cd2be6d75553b1bc2a9ee577d05b72f4f147734b4c9856407bbc7b5292e5fb8a3521cfa9a815fde85cd4f811f4ca876934fea2480)
set(QT_HASH_qt5-base             34f9350cdd3903b98129e83b02463536d864fd6e8d8c08ab414193480dcbe8a296d08b7bd4fab234f85c3a897736babf860bd5769d1e4d224d279755c575d573)
set(QT_HASH_qt5-charts           80c0d2580143bade54629acbb5e4c2cf13b1a9c6155fd56cb92105dddbba6105171590c6806dcef9ddc97d613e406bc7193f7d9b8020db27c8a11d4a4cd7b3dd)
set(QT_HASH_qt5-connectivity     eed70de9462660921fd4fa505baf09fc4a1854cd72918019bf34c52e3baf0c67d6fcbdbaf6fc854b982ffa6514fc9e061687b720f7b9b6ddb729c68ea7bd4075)
set(QT_HASH_qt5-datavis3d        8c1a07f607ceb7fecae261f25db17deb405dbc8053cbb286dd6edaf911ad4a9fd1e092189b2f8b791739c90905992aaf3cb7ce2fce7b5253fc7c44a3a00f2c1a)
set(QT_HASH_qt5-declarative      e0ce002638b3ddb0ee65f5b4dffe3f667dbc9d646e6fdf86ac1171e17495fa69b506b069d9ffc3f5844c238eb672a665f6a2403130f36d32c68a350d17e25bf6)
set(QT_HASH_qt5-doc              00dab980da36b412356e9436fae26ff54043252d61665c9a7d780a0994e4705c82637a00a6005fd69688f9e50aeb28abfc1c579676b2b32390b8ea3c80168d4e)
set(QT_HASH_qt5-gamepad          66d4e72fb2506a3327ba891607cdfe8820d956a917f2125ef2f2b593f8658f192dc14d547b2a6f22e3b99d6f4f5d03eba9d9b5628e76a73808a1f2a226289ae2)
set(QT_HASH_qt5-graphicaleffects 67eb3ca132c6bd6093287f9d54457124a5381e0a2ea4a868c0e2360f1705e372bcc4c88cb9e630989996f2bafa4faf5bf7031405109342dd7374dd4038fe2461)
set(QT_HASH_qt5-imageformats     17bfdcd7795acef19150b638f279f089af58f31531d2d0a9e29c2492e572a9bc750374f934eef33a61193621990575bb5af2cc339a26302d103972ce52a0045b)
set(QT_HASH_qt5-location         70750ce589a14adfee8429956b6529498c91eb0221f77674393fa66abb18dae16a2e7de8c8ea3d32e25e064125eb2b8353fb410a976d2e38b2e7019b6351237d)
set(QT_HASH_qt5-macextras        e26349a36647735e313be171ef7a6262d161df701703b921f053f065e8526cd7319a04f38091e18cd3a423f6a27d03a8c6acbeed78cd381156d848d431fd2795)
set(QT_HASH_qt5-mqtt             0)
set(QT_HASH_qt5-multimedia       49d95ed1c34e345fda383d63c1e23251a17424e156d0e536ee61126e87637b3a9d36e0d6d0976a206573e3344c6f70e2c5ebd078f0f872ffe7af56df57102a25)
set(QT_HASH_qt5-networkauth      6aa627c32452dc011e2157a69336742d84a82c0a850685a561741869aad1474aa6c21f04337076b785a14f2292f2d3b0500248e577a2fcd6f75bef201723d2db)
set(QT_HASH_qt5-purchasing       5088ac1230def99186a1c5ff570d0f29b7ff73d6771df509c215a0098ff673b38b5f296d14d137a457fb372c9f3262e43d8b267e1dda4e5e85f41b854cbb6b1b)
set(QT_HASH_qt5-quickcontrols    a336cb9f99d22adbc69b6ec726930750630d4f50314be28d4bbf93ebc88f7d245aa37586d931e5fecd2976e7a36f6e3aacbcc139d7074407e8778d7f61ff80af)
set(QT_HASH_qt5-quickcontrols2   ce5cc3fbb96bf5e868606a447168116d18f4df5b836b6cae9bf4ea26f9af53dcefe4208177bf3188a16d2e8361d81b90cea145a1ce922baf739cb779e148a060)
set(QT_HASH_qt5-remoteobjects    b651ef76fd339de946a8e4ef971dc083a70f4d5ac528ba97527b29f985f8112dcaf0fda12c66f69d6ddc2bb1bffbe5f87fa7415a7e89267b93d2b40ede1ec76d)
set(QT_HASH_qt5-script           ecb58df71dbaec22d7271cb980d50f60fa00d36c00707763b25df1d7831ace4365f586f1c565d7188e7690270af1c37e2411eaa8535b16e2de2127221e55eac9)
set(QT_HASH_qt5-scxml            f7db242a4af3c45af774b146aa7fb28fe868dcd4ce84fc72ecaefb73c7200a1428e9b4087c5517cdcdb58a6891ea36c57b7f37a372f766a2a829bf5029641186)
set(QT_HASH_qt5-sensors          1bea8ec93bd1b5d4c7b50b38e3636f29a06fc36f432483c74712229ef566cbd061660fef9ed0172251037cbe16803193313325cc02313ac09fd9b5cf3deb84cb)
set(QT_HASH_qt5-serialbus        bd0328ecfa6db39682f7e8db93a9573256dadd59a6591ba8f482ff9bd85ff133fe668a733125f7f485ce790d4edd6be7051ff55c2d7ad66d9a1db6445eabd1b5)
set(QT_HASH_qt5-serialport       a2a2ed9327f8e95642afbe7926bffee972475e5cecbcc722cc74ac84b2e1dbbfafd5c2a3e239592a10a266f770288f6f57aebff5ca0c69b5b60fcb4ffea69c20)
set(QT_HASH_qt5-speech           3bf182ed62e3288b91e996e0f6ca1bfbb85e1fc66d3a90058653dd13c4e0902fdca987ca39f63c9e4a992141dff86dcfd3641f66926807b3c42a356ad55c87a1)
set(QT_HASH_qt5-svg              10f63686e5abc203b97cfdf72725d888169790522a1652c05951ee1ecd853e076a8eb548282b4bd68ba47080b604615eae00b3d9b9b666e8a8ca5adc5f0ac58c)
set(QT_HASH_qt5-tools            ccac2447ce058d40d1fb93e805ed984b00808e8adee02c1e08ca536a96fa72fae7ce407ed303c0c12543eced3402461917a5c945a8eaab110de1b71d1ea9b4fe)
set(QT_HASH_qt5-translations     895859fc55d1c574a8f5d488889d8b5efb96c732a6b56b42dfff124f9af580315dccfe1efd9b164684a5ce82c605b6cf2e98f11be5364871e70521209898153c)
set(QT_HASH_qt5-virtualkeyboard  0201d2215e1552d48089db107ee6b6fab518a148ff8e43287c8e0ce3ff33ae27442a176c7a5a4105bdcda68bd6af1721afe622d93177f51ab69c7f6dc162413c)
set(QT_HASH_qt5-wayland          5a344d0d28f62540695f66b5ae4d5495be5675789461c1a663db52d825610d76c069f0d2599903046136e40ec52887c59b1d023a00cc5a501a855ef901b220ef)
set(QT_HASH_qt5-webchannel       6fe06304b72224497caabe4edf7ba72e5d2a000bd6eb221541e580a7c34978b65270a342bb0430057b213072d3d8133ab862d28e52978df8bd079b7b3228ae82)
set(QT_HASH_qt5-webengine        e5406f601f950162f721444c7e6d43d55d375a0f6d57b080fa7526af3870c79ee615e22a46389295059107f084035ed3abada0ca814c8336f2b3afc5a4b591cc)
set(QT_HASH_qt5-webglplugin      c3538a986e687e9ed1acc2817a47b42297703967bb074dc1d5e0cb9f28128f44f9fae30cd39e9efdfb75ffd2f61076a9c7b2aec5bb0475f5a53f8fc754c59626)
set(QT_HASH_qt5-websockets       f54e692d0aab8910ae65cf46475908145156f805b1492b92dd9b6f677332a25ebb406d6f7a298bace82a0a87565bdcd8083c6812c945440248fdba4ab71088bd)
set(QT_HASH_qt5-webview          1b5d21689d1bbc7d04f8f094a63308fae13110b209388b3a5d4ba5c5b10de68cc1f4f108908cfb26fd6f721142e81bb63087d202f13b1807e5cac000a2936394)
set(QT_HASH_qt5-winextras        f86c0dbaa74dee114708b6613d2f92a10bfc5c69cc40b663cbe4467a0fa0c21d6381e41641ff5b9323e2b93ea26f155280f542b76587391ebad5d2ed49a2856f)
set(QT_HASH_qt5-x11extras        b77dadc860ec822c13a8826f0605c4e3f134648835d306f84c3e0fc0196d899e08cf6ef690c8775d20da64e0660248afac23e441a4a204a96c260d727bfa78f3)
set(QT_HASH_qt5-xmlpatterns      1f2e11e8514a2b6bf6599c87de56b77e454c39a13b4cb59dbdc2f92c61ecfb1df4f381acabb5c026e2cc00ccd074a4c7e9c648d6c0814afa34bc748320ac2560)

if(QT_UPDATE_VERSION)
    message(STATUS "Running Qt in automatic version port update mode!")
    set(_VCPKG_INTERNAL_NO_HASH_CHECK 1)
    if("${PORT}" MATCHES "qt5-base")
        function(update_qt_version_in_manifest _port_name)
            set(_current_control "${VCPKG_ROOT_DIR}/ports/${_port_name}/vcpkg.json")
            file(READ ${_current_control} _control_contents)
            #message(STATUS "Before: \n${_control_contents}")
            string(REGEX REPLACE "\"version.*\": \"[0-9]+\.[0-9]+\.[0-9]+\",\n" "\"version\": \"${QT_MAJOR_MINOR_VER}.${QT_PATCH_VER}\",\n" _control_contents "${_control_contents}")
            string(REGEX REPLACE "\n  \"port-version\": [0-9]+," "" _control_contents "${_control_contents}")
            #message(STATUS "After: \n${_control_contents}")
            file(WRITE ${_current_control} "${_control_contents}")
            configure_file("${_current_control}" "${_current_control}" @ONLY NEWLINE_STYLE LF)
        endfunction()

        update_qt_version_in_manifest("qt5")
        foreach(_current_qt_port_basename ${QT_PORT_LIST})
            update_qt_version_in_manifest("qt5-${_current_qt_port_basename}")
        endforeach()
    endif()
endif()
