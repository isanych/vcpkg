# Every update requires an update of these hashes and the version within the control file of each of the 32 ports.
# So it is probably better to have a central location for these hashes and let the ports update via a script
set(QT_MAJOR_MINOR_VER 5.15)
set(QT_PATCH_VER 11)
set(QT_UPDATE_VERSION 0) # Switch to update qt and not build qt. Creates a file cmake/qt_new_hashes.cmake in qt5-base with the new hashes.

set(QT_PORT_LIST base 3d activeqt charts connectivity datavis3d declarative gamepad graphicaleffects imageformats location macextras mqtt multimedia networkauth
                 purchasing quickcontrols quickcontrols2 remoteobjects script scxml sensors serialport speech svg tools virtualkeyboard webchannel websockets
                 webview winextras xmlpatterns doc x11extras androidextras translations serialbus webengine webglplugin wayland)

set(QT_HASH_qt5-3d               1fe024e4e0052785106d88f86ae8b5a13bd9b3829f016d5c8c76cc9ca80f19861f78b3ea50084773a387be856cb990622aab154ed0f2786a131658931b432a68)
set(QT_HASH_qt5-activeqt         2583f82e2678b643ee98c94d7f9afe0ee39a8324c5e54c96f2158e17c74597be95c65209f985f3576440c9ce836ba74528787417050a86e11c95322efb7e0411)
set(QT_HASH_qt5-androidextras    0)
set(QT_HASH_qt5-base             f71ef599434473f4736bbfa1f0ecee695752ee5007c6d0188b1827cd843428c1e40f269e2a1fc8dc013fb2dde7f5a446db5b5ebccf03d47179d7ef3daaad9429)
set(QT_HASH_qt5-charts           a30375942edf7d8ededb43a58013bf714266bfa7dd58fb6663df45020f98395b433cabe0a54e6e444d5c3277754b0c66eb6afc1f31f6e911c00c7f74e894400b)
set(QT_HASH_qt5-connectivity     e675a9c59eb6bec0a4df3658022b01aeae7fe4474193238121f31bb3fac31b20c1fd4003733abe3e8cad1d49945d378867c81a6e8fe57af0629c1863270b6a6b)
set(QT_HASH_qt5-datavis3d        17387c339adb7ec5d5296130293bab1415ddc78cfb306b11455888080f055d02ceff64c9a1ef60392bdf31f38b372629cf682b219f044b460693dc7b38c4f181)
set(QT_HASH_qt5-declarative      b7595b6520539ca590fe2fd180f743d44351357f05c65b2ca2eebbbe59abe4b705c4a52fb676e4b76382bbb8953ad83b8d3869632cc855f53bcdb0523dacba31)
set(QT_HASH_qt5-doc              0)
set(QT_HASH_qt5-gamepad          172baef0e28dda304bb79995f774cb8d9a9a29d7ecc950c8111e2990bf10def25417746fcd0cb412194d3450281bf75d3c5ecb1a797d8f0ff4aeca339824232c)
set(QT_HASH_qt5-graphicaleffects eda94b916f795cfbe9c4478668292c665c8aec274cb0a3ee5801496b2d482b1aaaa45479e5e634ef40bca771c4e2377110df47f43c1f8de2e85b4370383d2bd8)
set(QT_HASH_qt5-imageformats     21d087918c5f4687e88acb3e9802be1cccadb0fb52a16dea035ae46136fef0dd85f5a4050b4dd5951b3f34b2c3f8e60eea5c1d97df70bd718c028b61594216e9)
set(QT_HASH_qt5-location         1ae85cf3b22dc2d8855f44666ad875b36a597e6e485b24076ccea5418f81384ff66f27b895bb66aaa580fd425dcf101859d7137dfe312fd5ef6ecd8cf6d75aec)
set(QT_HASH_qt5-macextras        0)
set(QT_HASH_qt5-mqtt             0)
set(QT_HASH_qt5-multimedia       7c16517e213dcea150309720047a25df3f59ad68998a51f5a15aa0e1791127ecbb1a0976cb1c8474c0cf929c6f0c16e4d835a5c39648b85d09de88b039309e16)
set(QT_HASH_qt5-networkauth      4a189d4c82d98403acc25099013b7e1d62adcb287542c81cca1e1ff2be7fe30a8ccd2b4f08056689570a335e03d3e93662b9b39402566b90b95a7dffccbc099f)
set(QT_HASH_qt5-purchasing       1912015497472083e98de59075c3737b1a7d8c8507cf7598cc8668d25088f31d172bd564b16e7eb10e4a35b21bb17b6f6d9362bc343704e13b28a15d662b33e1)
set(QT_HASH_qt5-quickcontrols    032f222b791cca0a10da1c6684a1d28c0070a0f5fd4b892302ea537ae301b61fe5ea67c0c7b1f19fe4d450f0bbe3b07f1543fd839b314a6a85bbe28161b0cfb7)
set(QT_HASH_qt5-quickcontrols2   89ae8557ad688efd3ace70820328a7b9cf05f4813c31a60580858456437200ad1375782efbed315b97689d98cf380a9e6d6596365e0ded3ace74cc41716502dd)
set(QT_HASH_qt5-remoteobjects    a58ceb147a281d84f37d7210929e278415f76742ae06df2f6a9c1d5db855aedd3ad74ef94688cf730f6c74460ba96f4a4db1f266496924fe24f2657269be615c)
set(QT_HASH_qt5-script           c44e8a3b07bee13ba69fa70f20325cf8501442745856731921342c54262aa340edf80a6825328a2ebb0eb7705b979f269ea695465a748ec9b5e8c097fe0c3b29)
set(QT_HASH_qt5-scxml            d41e017df600e355175e919703b2654a0f01034f03aee6d3e5021e7d7c61dc5a351d4511eca74c94f4b4fdb76aae20883ae305b0628f86fa14dea038f2e7c247)
set(QT_HASH_qt5-sensors          865c80dde8964642667507731c4f8eeddb873c903606294c46541da42b7305682f3932d5d142ff68ac94495569e2de7fd366c0801a6f07d31910eb686187b4f7)
set(QT_HASH_qt5-serialbus        02218ab77399f16b6fb9cda979c86a34f8fe7080a3532970ad3e5493f968a29bb07a8362b95bc32acc5839ec32eff1d9377a84c58faae3e4ddd468c1fad3339d)
set(QT_HASH_qt5-serialport       f6a33ee7821bb93db27b4e524c53e5d89831bfaec25b14e47846afb0376c0ace2522fb8487f1c782d1a54b2bb316d559d932017862568456445d260e6b05b68f)
set(QT_HASH_qt5-speech           68d282250358a552d88e748d8e5e826f420a14b1b64384c4e6dd3635e01ea722673170d601f752052fab01cf301a46fe1ee66e56cb3ec8c28cad4e51b1c93ec0)
set(QT_HASH_qt5-svg              0e396bb0e1c6a0a55462c63aa7573f0f310561c6b6ca5e75f79818e1e222193f9bcc3aee416d0ec5f5119445b420078b2d9e2ec34ee05cb63c35a63fe5f3ce03)
set(QT_HASH_qt5-tools            956148af9df9e00cc1ae25dfb4bc6c29639dfe69d6dcb8420706263f919c3fb2ac1109ad2539342fc3d55efbc1789ca9bc326faff8997ff859c38aded1351fe6)
set(QT_HASH_qt5-translations     e63263f053d6183de625b44319ecd2edd75f463f8e939c555cb085f3088eae52b4973ada8f881301362aedb9ce07ac8d4e28624fe50ec3b6faf3e3ad1b89c9a6)
set(QT_HASH_qt5-virtualkeyboard  fe7280130e6f49c11f6a6ba46eb92d40f6b572e2cebfe0767957b3a9b85072fb6e526d73c918b1f4a83698532b2db586423aa43b5604e72a52073a82edcef237)
set(QT_HASH_qt5-wayland          0)
set(QT_HASH_qt5-webchannel       d9c27a1554f20883b0b3aef2d7c2ae6282710090876606ba4aa75c4455443a19278c5fa5f5537c05b4c7c20db44e579933351e65e48bfa28e432b36da8076d0e)
set(QT_HASH_qt5-webengine        f563bda92c4c78f2ae0e01560a1fbb9b8db9d81abf4f23cb0d81a85f674f33b9db6ddd0eb9f440b5a3bc26350908ebbe643589c04e4a8d69518340edac66eb26)
set(QT_HASH_qt5-webglplugin      f43e812511215f89467456df173df37590d7685c3aa8e870b6029e8bd71e7d8690526d3fd9062573277e69161c679ba16651fcb66cc6d088c70176c502fa67bb)
set(QT_HASH_qt5-websockets       107e12119ac22273cc5deedef95bd1ed6541c4348877659f3495a98442d23d662d3d5bfb4de819c8e9bf81a5c26b3501a280ab74fd044bce937e372a109dfc7d)
set(QT_HASH_qt5-webview          124322c884ac69a7f9c50de487b5afd3729e25de164f7eea4c9e972523f1171ff4c9c8f87a7106f710ae7526c741639f51a30c751f351a37e83866438e98fb11)
set(QT_HASH_qt5-winextras        34297b3f428c84e0a233247bed749c8b817837f9b66ca2967751ca526f2d57a868d189a66c86673493b34ef8cf3799436afdf2f1d89c3339c4f3d1ce1a9423b4)
set(QT_HASH_qt5-x11extras        a8c3bfdbd4ff68c3d829192cb86822b5c1080ff038adc34475cfa555310343aec2bf12ec7b8642835bb6efed2924e1d704f69db018d65aca44760147bb72253e)
set(QT_HASH_qt5-xmlpatterns      4485b55cb55117a3caf9afba813befb40c94db76c035a3abb7966db04f6fde52b8595cab8a9196f3bfa4cbf8ee0f573cd21b5b6ce2365a21a32f4d8925874fe9)

if(QT_UPDATE_VERSION)
    message(STATUS "Running Qt in automatic version port update mode!")
    set(_VCPKG_INTERNAL_NO_HASH_CHECK 1)
    if("${PORT}" MATCHES "qt5-base")
        function(update_qt_version_in_manifest _port_name)
            set(_current_control "${VCPKG_ROOT_DIR}/ports/${_port_name}/vcpkg.json")
            file(READ ${_current_control} _control_contents)
            #message(STATUS "Before: \n${_control_contents}")
            string(REGEX REPLACE "\"version.*\": \"[0-9]+\.[0-9]+\.[0-9]+\",\n" "\"version\": \"${QT_MAJOR_MINOR_VER}.${QT_PATCH_VER}\",\n" _control_contents "${_control_contents}")
            string(REGEX REPLACE "\n  \"port-version\": [0-9]+," "" _control_contents "${_control_contents}")
            #message(STATUS "After: \n${_control_contents}")
            file(WRITE ${_current_control} "${_control_contents}")
            configure_file("${_current_control}" "${_current_control}" @ONLY NEWLINE_STYLE LF)
        endfunction()

        update_qt_version_in_manifest("qt5")
        foreach(_current_qt_port_basename ${QT_PORT_LIST})
            update_qt_version_in_manifest("qt5-${_current_qt_port_basename}")
        endforeach()
    endif()
endif()