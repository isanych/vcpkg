# Every update requires an update of these hashes and the version within the control file of each of the 32 ports.
# So it is probably better to have a central location for these hashes and let the ports update via a script
set(QT_MAJOR_MINOR_VER 5.15)
set(QT_PATCH_VER 12)
set(QT_UPDATE_VERSION 0) # Switch to update qt and not build qt. Creates a file cmake/qt_new_hashes.cmake in qt5-base with the new hashes.

set(QT_PORT_LIST base 3d activeqt charts connectivity datavis3d declarative gamepad graphicaleffects imageformats location macextras mqtt multimedia networkauth
                 purchasing quickcontrols quickcontrols2 remoteobjects script scxml sensors serialport speech svg tools virtualkeyboard webchannel websockets
                 webview winextras xmlpatterns doc x11extras androidextras translations serialbus webengine webglplugin wayland)

set(QT_HASH_qt5-3d               1fe024e4e0052785106d88f86ae8b5a13bd9b3829f016d5c8c76cc9ca80f19861f78b3ea50084773a387be856cb990622aab154ed0f2786a131658931b432a68)
set(QT_HASH_qt5-activeqt         1fc676e741a3f027119a569d8808a751d7e036351fb14bfda62c8739f34f41bfbebe25423ca526aa24e1648df8fc02e2c16588c5d711ba4541254ea0b096729f)
set(QT_HASH_qt5-androidextras    0)
set(QT_HASH_qt5-base             cc4ee0728e1106b32f791fc6567224a63dc8b994ff5155ef45897ae77f7276ef7f07876cd79727abbab6995c659accf030ea8b6e3a4a202eab76e82e0a1d5491)
set(QT_HASH_qt5-charts           a30375942edf7d8ededb43a58013bf714266bfa7dd58fb6663df45020f98395b433cabe0a54e6e444d5c3277754b0c66eb6afc1f31f6e911c00c7f74e894400b)
set(QT_HASH_qt5-connectivity     e675a9c59eb6bec0a4df3658022b01aeae7fe4474193238121f31bb3fac31b20c1fd4003733abe3e8cad1d49945d378867c81a6e8fe57af0629c1863270b6a6b)
set(QT_HASH_qt5-datavis3d        17387c339adb7ec5d5296130293bab1415ddc78cfb306b11455888080f055d02ceff64c9a1ef60392bdf31f38b372629cf682b219f044b460693dc7b38c4f181)
set(QT_HASH_qt5-declarative      74362fdd1a426d505d257d8af7d8e5d1e6c7b6ae9dfc0f757edf76d2dca23d4daedea84fbfd81e5ddc3703b6f933a73474facd4df577d2c22c44ffa785a667b9)
set(QT_HASH_qt5-doc              0)
set(QT_HASH_qt5-gamepad          172baef0e28dda304bb79995f774cb8d9a9a29d7ecc950c8111e2990bf10def25417746fcd0cb412194d3450281bf75d3c5ecb1a797d8f0ff4aeca339824232c)
set(QT_HASH_qt5-graphicaleffects f1cb54e197180ec4d43330a2f7b431bee85870ff21573a3cc35b6328c8a811601c90aa19387a17ed88db6405efedc3148b092a8e92e5ed8bb23cc72e74632493)
set(QT_HASH_qt5-imageformats     2564fc038705f1f4ad38d3def8eef1a631f002fff688f50eac3e695120af6705ff9c4bba55f4ea3980d4100cf970e1a41decca7fc724c25b78509c5bf6abc42d)
set(QT_HASH_qt5-location         7a2432c75d93ec0701be3fd2d06a156cc40e8d3f78b7a6b4233eb36226a5fd9b46ffa44dab848692cd99292f46a66c231b3eb85c01f1b812aa4fa593c0a4d9d4)
set(QT_HASH_qt5-macextras        0)
set(QT_HASH_qt5-mqtt             0)
set(QT_HASH_qt5-multimedia       7c16517e213dcea150309720047a25df3f59ad68998a51f5a15aa0e1791127ecbb1a0976cb1c8474c0cf929c6f0c16e4d835a5c39648b85d09de88b039309e16)
set(QT_HASH_qt5-networkauth      4a189d4c82d98403acc25099013b7e1d62adcb287542c81cca1e1ff2be7fe30a8ccd2b4f08056689570a335e03d3e93662b9b39402566b90b95a7dffccbc099f)
set(QT_HASH_qt5-purchasing       1912015497472083e98de59075c3737b1a7d8c8507cf7598cc8668d25088f31d172bd564b16e7eb10e4a35b21bb17b6f6d9362bc343704e13b28a15d662b33e1)
set(QT_HASH_qt5-quickcontrols    a79aabb63a6d204873f9315b450903add60d81e377166c9881bfc4f8f431fe3ff6931edfa1ecce0b1c50da90c130cdaee5bcb5b5792eef587f9e982f6c37db3f)
set(QT_HASH_qt5-quickcontrols2   79beb78f5a2072ec0978d5a3f0b0e59cf751e31a48fa2cf11ad85077afa00c55efb7aab23779ff54e07e93b68ff164121d78ae28138d0bcb795fe3315760bfcf)
set(QT_HASH_qt5-remoteobjects    a58ceb147a281d84f37d7210929e278415f76742ae06df2f6a9c1d5db855aedd3ad74ef94688cf730f6c74460ba96f4a4db1f266496924fe24f2657269be615c)
set(QT_HASH_qt5-script           164beb7a31266c5f11462d9214abe9df72488c1c0aae817f646164ee1bc7e3962cc4cebb79cc787faf2d262857b70fca07acfff8b1376859368f586ef9028b7a)
set(QT_HASH_qt5-scxml            d41e017df600e355175e919703b2654a0f01034f03aee6d3e5021e7d7c61dc5a351d4511eca74c94f4b4fdb76aae20883ae305b0628f86fa14dea038f2e7c247)
set(QT_HASH_qt5-sensors          865c80dde8964642667507731c4f8eeddb873c903606294c46541da42b7305682f3932d5d142ff68ac94495569e2de7fd366c0801a6f07d31910eb686187b4f7)
set(QT_HASH_qt5-serialbus        02218ab77399f16b6fb9cda979c86a34f8fe7080a3532970ad3e5493f968a29bb07a8362b95bc32acc5839ec32eff1d9377a84c58faae3e4ddd468c1fad3339d)
set(QT_HASH_qt5-serialport       8da0c1a3c5fcb17b7c691b002280253a715241cd1de30acf0d807d49474996f7326787958780c2aeddf3ee856857e4fca0680de8744bd2c2894da2bc908c566d)
set(QT_HASH_qt5-speech           68d282250358a552d88e748d8e5e826f420a14b1b64384c4e6dd3635e01ea722673170d601f752052fab01cf301a46fe1ee66e56cb3ec8c28cad4e51b1c93ec0)
set(QT_HASH_qt5-svg              fcbf31fe1f158ae138f6b49c620ab4db623b69e1869f3cb2ccd4f2afe711d33539259223a3cc4f7b82067224f3e3c1278a179be6cc18056923dfc3dc11113c79)
set(QT_HASH_qt5-tools            f57e803c36a3e4f784441a7cc852177a87c55b1560d2128fe93d77112b271c52c41f3376f7ec8860a6f9b88c039900d50808adaa223abf13f2ae931df95e6a7c)
set(QT_HASH_qt5-translations     e63263f053d6183de625b44319ecd2edd75f463f8e939c555cb085f3088eae52b4973ada8f881301362aedb9ce07ac8d4e28624fe50ec3b6faf3e3ad1b89c9a6)
set(QT_HASH_qt5-virtualkeyboard  fe7280130e6f49c11f6a6ba46eb92d40f6b572e2cebfe0767957b3a9b85072fb6e526d73c918b1f4a83698532b2db586423aa43b5604e72a52073a82edcef237)
set(QT_HASH_qt5-wayland          0)
set(QT_HASH_qt5-webchannel       0b7552e5556dde6087b68dd4341228fb932dd0b3251decde9559f47118873b475bef589600d906c8a3b20c1cbde07f61163f2c9288814c0daf2954c79b1b7d7e)
set(QT_HASH_qt5-webengine        ae99cd08c3f037b0669f85b08eca8a05032b01cfeff5934b4905b38b891a1b234d93ae66a2aa7a4d3c3cec9082d4fccc506edaa891f0418e6793923a46cf5c85)
set(QT_HASH_qt5-webglplugin      f43e812511215f89467456df173df37590d7685c3aa8e870b6029e8bd71e7d8690526d3fd9062573277e69161c679ba16651fcb66cc6d088c70176c502fa67bb)
set(QT_HASH_qt5-websockets       107e12119ac22273cc5deedef95bd1ed6541c4348877659f3495a98442d23d662d3d5bfb4de819c8e9bf81a5c26b3501a280ab74fd044bce937e372a109dfc7d)
set(QT_HASH_qt5-webview          124322c884ac69a7f9c50de487b5afd3729e25de164f7eea4c9e972523f1171ff4c9c8f87a7106f710ae7526c741639f51a30c751f351a37e83866438e98fb11)
set(QT_HASH_qt5-winextras        34297b3f428c84e0a233247bed749c8b817837f9b66ca2967751ca526f2d57a868d189a66c86673493b34ef8cf3799436afdf2f1d89c3339c4f3d1ce1a9423b4)
set(QT_HASH_qt5-x11extras        a8c3bfdbd4ff68c3d829192cb86822b5c1080ff038adc34475cfa555310343aec2bf12ec7b8642835bb6efed2924e1d704f69db018d65aca44760147bb72253e)
set(QT_HASH_qt5-xmlpatterns      6af37a862475f8a37b32c3ecba8297c6526cad4e25431aeb6dab6ae039e5d2f86c439aca1899489220368157986e7a320c71cf122b26cd9ac5e74548bf47f0e9)

if(QT_UPDATE_VERSION)
    message(STATUS "Running Qt in automatic version port update mode!")
    set(_VCPKG_INTERNAL_NO_HASH_CHECK 1)
    if("${PORT}" MATCHES "qt5-base")
        function(update_qt_version_in_manifest _port_name)
            set(_current_control "${VCPKG_ROOT_DIR}/ports/${_port_name}/vcpkg.json")
            file(READ ${_current_control} _control_contents)
            #message(STATUS "Before: \n${_control_contents}")
            string(REGEX REPLACE "\"version.*\": \"[0-9]+\.[0-9]+\.[0-9]+\",\n" "\"version\": \"${QT_MAJOR_MINOR_VER}.${QT_PATCH_VER}\",\n" _control_contents "${_control_contents}")
            string(REGEX REPLACE "\n  \"port-version\": [0-9]+," "" _control_contents "${_control_contents}")
            #message(STATUS "After: \n${_control_contents}")
            file(WRITE ${_current_control} "${_control_contents}")
            configure_file("${_current_control}" "${_current_control}" @ONLY NEWLINE_STYLE LF)
        endfunction()

        update_qt_version_in_manifest("qt5")
        foreach(_current_qt_port_basename ${QT_PORT_LIST})
            update_qt_version_in_manifest("qt5-${_current_qt_port_basename}")
        endforeach()
    endif()
endif()